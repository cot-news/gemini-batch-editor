<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Pro æ™ºèƒ½æ‰¹é‡æŠ å›¾å·¥ä½œç«™</title>
    <!-- å¼•å…¥æ ·å¼ä¸è„šæœ¬åº“ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#3B82F6', secondary: '#10B981', accent: '#6366F1', dark: '#1E293B' },
                    animation: { 'fade-in': 'fadeIn 0.6s ease-in-out', 'slide-up': 'slideUp 0.8s ease-out' }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .glass { backdrop-filter: blur(12px); background: rgba(255, 255, 255, 0.7); border: 1px solid rgba(255, 255, 255, 0.3); }
            .card-hover { transition: all 0.3s ease; }
            .card-hover:hover { transform: translateY(-5px); box-shadow: 0 15px 30px -10px rgba(0,0,0,0.1); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-900 overflow-x-hidden">

    <!-- 1. å¯¼èˆªæ  -->
    <nav class="bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="bg-primary rounded-xl p-2 shadow-lg shadow-blue-200 text-white">
                        <i class="fa fa-magic text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold">Gemini <span class="text-primary">Batch</span></h1>
                        <p class="text-[10px] text-gray-400 uppercase tracking-widest font-bold">Smart Image Editor</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="#workflow" class="text-sm text-gray-500 hover:text-primary transition-colors">æŠ€æœ¯æ¶æ„</a>
                    <button onclick="document.getElementById('editor').scrollIntoView({behavior:'smooth'})" class="bg-primary text-white px-5 py-2 rounded-xl text-sm font-bold shadow-lg shadow-blue-200 hover:opacity-90 transition-all">
                        å¼€å§‹ä½¿ç”¨
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 2. Hero è‹±é›„åŒºåŸŸ -->
    <section class="relative py-20 overflow-hidden">
        <div class="absolute inset-0 gradient-bg opacity-5"></div>
        <div class="max-w-7xl mx-auto px-4 text-center relative z-10 animate-fade-in">
            <h2 class="text-5xl md:text-7xl font-black text-dark mb-6 tracking-tight">
                è®© AI æˆä¸ºä½ çš„ <span class="text-primary italic">åæœŸä¸“å®¶</span>
            </h2>
            <p class="text-xl text-gray-500 max-w-2xl mx-auto mb-10 leading-relaxed">
                ç»“åˆ Gemini Pro çš„å›¾åƒåˆ†æå¤§è„‘ä¸é«˜æ€§èƒ½æŠ å›¾å¼•æ“ï¼Œ<br>ä¸ºæ‚¨çš„ç”µå•†äº§å“å›¾ç‰‡å®ç°ä¸€é”®æ‰¹é‡èƒŒæ™¯ç§»é™¤ä¸æ™ºèƒ½é˜´å½±ã€‚
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <div class="flex items-center space-x-2 bg-white px-4 py-2 rounded-full shadow-sm border border-gray-100 text-sm text-gray-500">
                    <i class="fa fa-check-circle text-success"></i> <span>åŸºäº Gemini 1.5 Flash</span>
                </div>
                <div class="flex items-center space-x-2 bg-white px-4 py-2 rounded-full shadow-sm border border-gray-100 text-sm text-gray-500">
                    <i class="fa fa-check-circle text-success"></i> <span>ClawCloud åä»£æ”¯æŒ</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. æ ¸å¿ƒç¼–è¾‘å™¨åŒºåŸŸ (æ™ºèƒ½å·¥ä½œå°) -->
    <section id="editor" class="max-w-7xl mx-auto px-4 py-12 scroll-mt-20">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
            
            <!-- æ§åˆ¶å° (å·¦ä¾§) -->
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-white rounded-[2rem] p-8 shadow-xl shadow-gray-200/50 border border-gray-100">
                    <h3 class="text-xl font-bold mb-6 flex items-center">
                        <i class="fa fa-cog mr-3 text-primary"></i> ä»»åŠ¡é…ç½®
                    </h3>
                    
                    <div class="space-y-5">
                        <!-- æ¨¡å‹é€‰æ‹© -->
                        <div>
                            <label class="text-[11px] font-black text-gray-400 uppercase mb-2 block tracking-wider">é€‰æ‹© AI æ¨¡å‹</label>
                            <select id="modelSelect" class="w-full px-4 py-3 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-primary outline-none transition-all text-sm font-medium cursor-pointer">
                                <optgroup label="âœ¨ Gemini 3 (æœ€æ–°é¢„è§ˆ)">
                                    <option value="gemini-3-flash-preview">Gemini 3 Flash Preview (æé€Ÿ)</option>
                                    <option value="gemini-3-pro-preview">Gemini 3 Pro Preview (å…¨èƒ½)</option>
                                </optgroup>
                                <optgroup label="ğŸš€ Gemini 2.5 (é«˜æ€§èƒ½ç¨³å®š)">
                                    <option value="gemini-2.5-flash" selected>Gemini 2.5 Flash (æœ€å¹³è¡¡)</option>
                                    <option value="gemini-2.5-pro">Gemini 2.5 Pro (ä¸“ä¸šåˆ†æ)</option>
                                    <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash-Lite (æé€Ÿè½»é‡)</option>
                                </optgroup>
                                <optgroup label="ğŸ§ª å®éªŒæ€§/å…¶ä»–">
                                    <option value="gemini-exp-1206">Gemini Experimental 1206</option>
                                    <option value="gemini-flash-latest">Gemini Flash Latest</option>
                                    <option value="gemini-2.5-computer-use-preview-10-2025">Computer Use Preview</option>
                                </optgroup>
                            </select>
                        </div>
                        <!-- åä»£åœ°å€ (æ··æ·†+è„±æ•) -->
                        <div>
                            <label class="text-[10px] font-black text-slate-400 uppercase mb-1 block tracking-widest">Gemini åä»£åœ°å€</label>
                            <input type="password" id="geminiProxy" placeholder="â—â—â—â—â—â— ä½¿ç”¨é»˜è®¤é¢„è®¾" class="w-full px-4 py-3 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-primary text-xs transition-all">
                        </div>

                        <!-- åç«¯åœ°å€ (æ··æ·†+è„±æ•) -->
                        <div>
                            <label class="text-[10px] font-black text-slate-400 uppercase mb-1 block tracking-widest">Hugging Face åç«¯</label>
                            <input type="password" id="hfBackend" placeholder="â—â—â—â—â—â— ä½¿ç”¨é»˜è®¤é¢„è®¾" class="w-full px-4 py-3 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-primary text-xs transition-all">
                        </div>

                        <!-- API Key (ç•™ç©º) -->
                        <div>
                            <label class="text-[10px] font-black text-slate-400 uppercase mb-1 block tracking-widest">Gemini API Key</label>
                            <input type="password" id="apiKey" placeholder="åœ¨æ­¤è¾“å…¥æ‚¨çš„ API Key" class="w-full px-4 py-3 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-primary text-xs transition-all shadow-inner">
                        </div>

                        <div id="dropZone" class="border-2 border-dashed border-blue-100 rounded-3xl p-8 text-center bg-blue-50/30 hover:bg-blue-50 hover:border-primary transition-all cursor-pointer group" onclick="document.getElementById('fileInput').click()">
                            <input type="file" id="fileInput" multiple accept="image/*" class="hidden">
                            <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:scale-110 transition-all">
                                <i class="fa fa-plus text-primary text-xl"></i>
                            </div>
                            <p class="text-sm font-bold text-gray-700">æ·»åŠ å›¾ç‰‡</p>
                            <p class="text-[10px] text-gray-400 mt-1 uppercase tracking-tighter">æ”¯æŒå¤šé€‰å¤„ç†</p>
                        </div>

                        <button onclick="startBatchProcess()" id="startBtn" class="w-full mt-6 bg-primary hover:bg-blue-600 text-white py-5 rounded-[1.5rem] font-bold shadow-xl shadow-blue-200 transition-all flex items-center justify-center space-x-3">
                            <i class="fa fa-rocket"></i>
                            <span>å¼€å§‹ä¸€é”®æ™ºèƒ½æŠ å›¾</span>
                        </button>
                    </div>
                </div>
                
                <!-- æŠ€æœ¯ä¼˜åŠ¿å±•ç¤º -->
                <div class="bg-gradient-to-br from-indigo-600 to-blue-700 rounded-[2rem] p-6 text-white shadow-xl shadow-blue-200">
                    <h4 class="font-bold flex items-center mb-3">
                        <i class="fa fa-lightbulb-o mr-2"></i> æŠ€æœ¯ä¼˜åŠ¿
                    </h4>
                    <p class="text-xs text-blue-100 leading-relaxed opacity-90">
                        é‡‡ç”¨æœ€æ–°çš„ Gemini 1.5 Flash è§†è§‰æ¨¡å‹ï¼Œè‡ªåŠ¨åˆ†æå…‰æºæ–¹å‘ä¸é˜´å½±åŠå¾„ï¼Œå¹¶ç”±åç«¯ä¸“ç”¨æŠ å›¾ç®—æ³•æ‰§è¡Œé«˜ç²¾åº¦åˆ†å‰²ã€‚
                    </p>
                </div>
            </div>

            <!-- ç»“æœåŒº (å³ä¾§) -->
            <div class="lg:col-span-8">
                <div class="bg-white rounded-[2rem] p-8 shadow-xl shadow-gray-200/50 border border-gray-100 min-h-[600px] relative">
                    <!-- è¿›åº¦æ˜¾ç¤º -->
                    <div id="progressArea" class="hidden mb-10 animate-fade-in">
                        <div class="flex justify-between items-end mb-3">
                            <div>
                                <h4 id="progressText" class="text-primary font-black text-lg">AI æ­£åœ¨æ€è€ƒ...</h4>
                                <p class="text-[10px] text-gray-400 uppercase tracking-widest">Processing Queue</p>
                            </div>
                            <span id="percentText" class="text-3xl font-black text-gray-200">0%</span>
                        </div>
                        <div class="w-full bg-gray-100 h-2 rounded-full overflow-hidden">
                            <div id="progressBar" class="bg-primary h-full transition-all duration-700 ease-out" style="width: 0%"></div>
                        </div>
                    </div>

                    <!-- åŠ¨æ€ç½‘æ ¼ -->
                    <div id="resultGrid" class="grid grid-cols-2 md:grid-cols-3 gap-6">
                        <div class="col-span-full py-40 text-center">
                            <i class="fa fa-images text-7xl text-gray-100 mb-6"></i>
                            <p class="text-gray-300 font-medium">è¿˜æ²¡æœ‰å¾…å¤„ç†çš„ä»»åŠ¡</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. ç—›ç‚¹åˆ†æåŒºåŸŸ (å‚è€ƒç½‘é¡µé£æ ¼) -->
    <section class="bg-white py-24">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16">
                <h3 class="text-3xl font-black text-dark mb-4">ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬ï¼Ÿ</h3>
                <p class="text-gray-500">è§£å†³ä¼ ç»Ÿç”µå•†æŠ å›¾çš„ç¹çä¸åƒµç¡¬</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-red-50 p-8 rounded-[2rem] border border-red-100 card-hover">
                    <div class="w-12 h-12 bg-red-100 text-red-500 rounded-full flex items-center justify-center mb-6"><i class="fa fa-clock-o text-xl"></i></div>
                    <h4 class="text-xl font-bold mb-3">å‘Šåˆ«æ‰‹åŠ¨ PS</h4>
                    <p class="text-sm text-gray-600 leading-relaxed">ä¼ ç»Ÿäººå·¥æŠ å›¾æ¯å¼ éœ€èŠ±è´¹ 3-5 åˆ†é’Ÿï¼Œæœ¬å·¥å…·ä»…éœ€ 5-10 ç§’å³å¯å®Œæˆæ‰¹é‡åŒ–ä»»åŠ¡ã€‚</p>
                </div>
                <div class="bg-orange-50 p-8 rounded-[2rem] border border-orange-100 card-hover">
                    <div class="w-12 h-12 bg-orange-100 text-orange-500 rounded-full flex items-center justify-center mb-6"><i class="fa fa-cubes text-xl"></i></div>
                    <h4 class="text-xl font-bold mb-3">æ™ºèƒ½é˜´å½±æ¨¡æ‹Ÿ</h4>
                    <p class="text-sm text-gray-600 leading-relaxed">ä¸ä»…ä»…æ˜¯å»èƒŒæ™¯ã€‚Gemini æ™ºèƒ½åˆ†æäº§å“å½¢æ€ï¼Œæ¨¡æ‹ŸçœŸå®è‡ªç„¶çš„å…‰å½±è½åœ°æ•ˆæœã€‚</p>
                </div>
                <div class="bg-purple-50 p-8 rounded-[2rem] border border-purple-100 card-hover">
                    <div class="w-12 h-12 bg-purple-100 text-purple-500 rounded-full flex items-center justify-center mb-6"><i class="fa fa-money text-xl"></i></div>
                    <h4 class="text-xl font-bold mb-3">é›¶æˆæœ¬éƒ¨ç½²</h4>
                    <p class="text-sm text-gray-600 leading-relaxed">åˆ©ç”¨ Hugging Face å…è´¹ç®—åŠ›ä¸ Gemini å…è´¹ APIï¼Œå®ç°çœŸæ­£çš„é›¶æˆæœ¬å•†ä¸šçº§å·¥å…·ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. æ€§èƒ½å±•ç¤ºå›¾è¡¨ -->
    <section class="bg-gray-50 py-24">
        <div class="max-w-5xl mx-auto px-4">
            <div class="bg-white p-10 rounded-[3rem] shadow-xl border border-gray-100">
                <h3 class="text-2xl font-black text-center mb-10">å¤„ç†æ•ˆç‡å¯¹æ¯”</h3>
                <div class="h-80">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. é¡µè„š -->
    <footer class="bg-dark text-gray-400 py-16">
        <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-12">
            <div class="col-span-2">
                <div class="flex items-center space-x-3 mb-6">
                    <div class="bg-primary rounded-xl p-2 text-white">
                        <i class="fa fa-magic"></i>
                    </div>
                    <span class="text-white font-bold text-xl">Gemini Batch Editor</span>
                </div>
                <p class="text-sm leading-relaxed max-w-sm">åŸºäº Google Gemini Pro çš„ä¸“ä¸šæ‰¹é‡å›¾åƒå¤„ç†è§£å†³æ–¹æ¡ˆã€‚ä¸ºç”µå•†ä¼ä¸šæä¾›æœ€é«˜æ•ˆçš„ AI è§†è§‰å¤„ç†èƒ½åŠ›ã€‚</p>
            </div>
            <div>
                <h5 class="text-white font-bold mb-4">é“¾æ¥</h5>
                <ul class="space-y-2 text-sm">
                    <li><a href="#" class="hover:text-white transition-colors">GitHub æºç </a></li>
                    <li><a href="#" class="hover:text-white transition-colors">API æ–‡æ¡£</a></li>
                </ul>
            </div>
            <div>
                <h5 class="text-white font-bold mb-4">è”ç³»</h5>
                <p class="text-sm italic">AI Powered Backend on Hugging Face</p>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 border-t border-gray-800 mt-12 pt-8 text-center text-xs tracking-widest">
            &copy; 2026 GEMINI BATCH EDITOR. ALL RIGHTS RESERVED.
        </div>
    </footer>

    <!-- æ ¸å¿ƒé€»è¾‘è„šæœ¬ -->
    <script>
          // --- æ ¸å¿ƒéšç§åŠ å¯†åŒº (Base64 æ··æ·†) ---
        // åä»£åœ°å€æ··æ·†
        const _O_P = "aHR0cHM6Ly95cXlmbWNydHZjaWgubXUtd2VzdC0xLmNsYXdjbG91ZHJ1bi5jb20vdjFiZXRh"; 
        // åç«¯åœ°å€æ··æ·†
        const _O_B = "aHR0cHM6Ly9uYWlkZC1teS1haS1yZW1vdmVyLmhmLnNwYWNl";

        let queue = [];
        let isProcessing = false;

        // æ˜¾ç¤º/éšè—æ•æ„Ÿé¡¹é€»è¾‘
        function toggleAllMasks() {
            const fields = ['geminiProxy', 'hfBackend', 'apiKey'];
            fields.forEach(id => {
                const el = document.getElementById(id);
                el.type = el.type === 'password' ? 'text' : 'password';
            });
        }

        document.getElementById('fileInput').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            queue = [...queue, ...files.map(file => ({
                file: file,
                status: 'ready',
                resultUrl: null,
                log: 'ç­‰å¾…'
            }))];
            renderGrid();
        });

        function renderGrid() {
            const grid = document.getElementById('resultGrid');
            if (queue.length === 0) return;
            grid.innerHTML = queue.map((item, index) => `
                <div class="relative bg-white rounded-[2rem] border border-slate-50 overflow-hidden shadow-sm group hover:shadow-xl transition-all duration-500">
                    <img src="${item.resultUrl || URL.createObjectURL(item.file)}" class="w-full aspect-square object-cover ${item.status === 'processing' ? 'scale-110 blur-sm opacity-50' : ''} transition-all duration-700">
                    
                    ${item.status === 'processing' ? `
                        <div class="absolute inset-0 flex flex-col items-center justify-center p-4">
                            <div class="bg-white/90 backdrop-blur-md p-4 rounded-2xl shadow-xl border border-white flex flex-col items-center">
                                <i class="fa fa-spinner fa-spin text-primary text-xl mb-2"></i>
                                <span class="text-[9px] font-black text-slate-500 uppercase">${item.log}</span>
                            </div>
                        </div>
                    ` : ''}

                    ${item.status === 'success' ? `
                        <div class="absolute inset-0 bg-primary/20 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center">
                            <a href="${item.resultUrl}" download="result_${item.file.name}" class="bg-white w-12 h-12 rounded-full flex items-center justify-center text-primary shadow-2xl hover:scale-125 transition-transform">
                                <i class="fa fa-download text-lg"></i>
                            </a>
                        </div>
                    ` : ''}

                    ${item.status === 'error' ? `
                        <div class="absolute inset-0 bg-red-50/90 flex flex-col items-center justify-center p-4">
                            <span class="text-red-500 text-[10px] font-bold uppercase tracking-tighter">Engine Failure</span>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        async function startBatchProcess() {
            if (isProcessing || queue.length === 0) return;
            
            // æ™ºèƒ½è¯»å–é€»è¾‘ï¼šå¦‚æœæ¡†é‡Œæ˜¯ç©ºçš„ï¼Œåˆ™ä½¿ç”¨ä»£ç å†…é»˜è®¤çš„è§£å¯†åœ°å€
            const rawApiKey = document.getElementById('apiKey').value.trim();
            const rawProxy = document.getElementById('geminiProxy').value.trim();
            const rawBackend = document.getElementById('hfBackend').value.trim();

            const apiKey = rawApiKey; // é»˜è®¤å°±æ˜¯ç©º
            const geminiUrl = rawProxy !== "" ? rawProxy : atob(_O_P);
            const hfUrl = rawBackend !== "" ? rawBackend : atob(_O_B);
            const selectedModel = document.getElementById('modelSelect').value;

            if (!apiKey) return alert("è¯·å…ˆè¾“å…¥æ‚¨çš„ Gemini API Keyï¼");

            isProcessing = true;
            document.getElementById('progressArea').classList.remove('hidden');

            for (let i = 0; i < queue.length; i++) {
                if (queue[i].status === 'success') continue;

                queue[i].status = 'processing';
                queue[i].log = 'Gemini åˆ†æä¸­';
                renderGrid();
                updateProgress(i, queue.length);

                try {
                    // 1. å¤§è„‘åˆ†æ (Gemini)
                    const base64 = await toBase64(queue[i].file);
                    const cleanProxy = geminiUrl.replace(/\/$/, "");
                    const geminiRes = await fetch(`${cleanProxy}/models/${selectedModel}:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [
                                    { text: "åˆ†ææ­¤å›¾ã€‚ä¸ºäº†æŠ å›¾åŠ é˜´å½±ï¼Œè¯·è¿”å›é˜´å½±å‚æ•°ï¼šoffset_x, offset_y, blur(5-15), opacity(0.3-0.6)ã€‚åªè¿”å› JSON: {\"offset_x\": 10, \"offset_y\": 10, \"blur\": 10, \"opacity\": 0.4}" },
                                    { inline_data: { mime_type: queue[i].file.type, data: base64.split(',')[1] } }
                                ]
                            }]
                        })
                    });

                    if (!geminiRes.ok) throw new Error("GEMINI_ERROR");
                    const geminiData = await geminiRes.json();
                    const rawText = geminiData.candidates[0].content.parts[0].text;
                    const shadowParams = rawText.match(/\{.*\}/s)[0]; 

                    // 2. åŒæ‰‹æ‰§è¡Œ (Hugging Face)
                    queue[i].log = 'åç«¯å¤„ç†ä¸­';
                    renderGrid();

                    const fd = new FormData();
                    fd.append('file', queue[i].file);
                    fd.append('shadow_params', shadowParams);

                    const cleanHf = hfUrl.replace(/\/$/, "");
                    const hfRes = await fetch(`${cleanHf}/process_smart`, { method: 'POST', body: fd });
                    if (!hfRes.ok) throw new Error("HF_ERROR");
                    
                    const blob = await hfRes.blob();
                    queue[i].resultUrl = URL.createObjectURL(blob);
                    queue[i].status = 'success';

                } catch (error) {
                    console.error(error);
                    queue[i].status = 'error';
                    queue[i].log = error.message; // æŠŠå…·ä½“çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºåœ¨å›¾ç‰‡ä¸Š
                }

                renderGrid();
                updateProgress(i + 1, queue.length);
            }
            isProcessing = false;
            document.getElementById('progressText').innerText = "ä»»åŠ¡å¤„ç†å®Œæ¯•ï¼";         
        }

        // å·¥å…·å‡½æ•°
        function toBase64(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
            });
        }

        function updateProgress(cur, total) {
            const percent = Math.round((cur / total) * 100);
            document.getElementById('progressBar').style.width = percent + '%';
            document.getElementById('percentText').innerText = percent + '%';
        }

        // åˆå§‹åŒ–å›¾è¡¨
        const ctx = document.getElementById('performanceChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['ä¼ ç»Ÿæ‰‹åŠ¨', 'æ™®é€š AI', 'Gemini Smart Editor'],
                datasets: [{
                    label: 'å¤„ç† 10 å¼ å›¾å¹³å‡è€—æ—¶ (ç§’)',
                    data: [1200, 60, 15],
                    backgroundColor: ['#f87171', '#fbbf24', '#3b82f6'],
                    borderRadius: 10
                }]
            },
            options: { maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });

        // æ»šåŠ¨åŠ¨ç”»è§‚å¯Ÿå™¨
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('animate-slide-up');
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.card-hover').forEach(card => observer.observe(card));
    </script>
</body>
</html>
